---
import Layout from "../layouts/Layout.astro";
import * as interfaces from "../lib/interfaces.ts";
import { getAllPosts, getPostBySlug, getAllBlocksByBlockId } from "../lib/notion/client.ts";
import PostBody from "../components/PostBody.astro";
export async function getStaticPaths() {
  const posts = await getAllPosts();
  return posts.map((post: interfaces.Post) => ({ params: { slug: post.Slug } }));
}
const slug = "_index";
const post = await getPostBySlug(slug);
if (!post) {
  throw new Error("Post not found. slug: ${slug}");
}
const blocks = await Promise.all([getAllBlocksByBlockId(post.PageId)]);
---

<Layout>
  <main>
    <PostBody blocks={blocks} />
  </main>

  {
    /*
  TODO: asideを追加する
  <aside>
    <AsideInfo />
  </aside>
  
    TODO: コードに色がつかない

    TODO: テーマを適用する
    
    TODO: 画像を拡大できるように
    */
  }
</Layout>
